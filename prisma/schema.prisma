datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  output   = "../generated"
}

model GuildConfig {
  guildId                 String @id @map("guild_id")
  metroNWUpdatesChannelId String @map("metro_nw_updates_channel_id")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  lineStatusMessages MetroLineStatusMessage[]

  @@map("guild_configs")
}

model MetroLineStatusMessage {
  guildId   String    @map("guild_id")
  channelId String    @map("channel_id")
  messageId String    @id @map("message_id")
  line      MetroLine
  infoHash  String    @map("info_hash")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  guildConfig GuildConfig @relation(fields: [guildId], references: [guildId])

  @@map("line_status_messages")
}

model MetroStationDetails {
  code         String        @id
  line         MetroLine
  name         String
  expressRoute ExpressRoute?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("metro_stations")
}

enum MetroLine {
  l1
  l2
  l3
  l4
  l4a
  l5
  l6
}

enum ExpressRoute {
  common
  green
  red
}
