datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  output   = "../generated"
}

enum LineId {
  l1
  l2
  l3
  l4
  l4a
  l5
  l6
}

enum ExpressRoute {
  common
  green
  red
}

model GuildConfig {
  guildId               String               @id @map("guild_id")
  metroUpdatesChannelId String?              @map("metro_updates_channel_id")
  metroStatusMessages   MetroStatusMessage[]

  @@map("guild_configs")
}

model MetroStatusMessage {
  messageId   String      @id @map("message_id")
  guildId     String      @map("guild_id")
  channelId   String      @map("channel_id")
  line        LineId      @map("line")
  overrides   Json?
  infoHash    String      @map("info_hash")
  guildConfig GuildConfig @relation(fields: [guildId], references: [guildId])

  @@map("metro_status_messages")
}

model MetroStationDetails {
  stationId String        @id @map("station_id")
  line      LineId
  name      String
  route     ExpressRoute?

  @@map("metro_station_details")
}
